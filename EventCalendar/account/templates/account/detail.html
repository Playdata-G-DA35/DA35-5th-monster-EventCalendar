<!-- account/templates/account/detail.html -->
{% extends 'layout.html'%}
{% block title%}My Info{% endblock title%}

{% block contents%}
<table class="table">
    <tr>
        <th>계정명</th>
        <td>{{object.username}}</td>
    </tr>
    <tr>
        <th>이름</th>
        <td>{{object.name}}</td>
    </tr>
    {% if object.team %}
    <tr>
        <th>소속팀</th>
        <td>{{object.team}}<button>탈퇴</button></td>
        
    </tr> 
    {% else%}
    <th>소속팀</th>
    <td>소속 팀이 없습니다.</td>
    {% endif%}
</table>

{%if object.is_team_manager%}
    <table class="table">
    <tr>
    {% for member in team.all%}
        <th>{{member.name}}</th>
        <button>탈퇴</button>
        </tr>
    {% endfor%}
    <th>가입 요청 항목</th>
    {% if object.is_join_request%}
    <td>요청하셨습니다. 수락하시겠습니까?</td>
    <button>수락</button>
    {% else %}
    <td> 팀 가입 요청이 없습니다</td>
    {% endif %}
    </table>
{% else%}
    <th>팀장이 아닙니다.</th>
{% endif %}



<div class="mt-3">
    <a href="{% url 'account:password_change' %}" class="btn btn-primary">패스워드변경</a>
    <a href="{% url 'account:update' %}" class="btn btn-primary">정보 수정</a>
    {% comment %}
    <a href="{% url 'account:delete' %}" class="btn btn-primary">탈퇴</a>
    <a href="{% url 'account:delete2' user.pk %}" class="btn btn-primary">탈퇴2</a>
    {% endcomment %}
</div>
{% endblock contents%}